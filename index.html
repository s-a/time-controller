<!DOCTYPE html>
<html>
<head>
	<title>TimeController Testpage</title>
	<script type="text/javascript" src="lib/index.js"></script>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
	<style>
		.progress {
		  position: relative;
		  width: 100%;
		  height: 30px;
		  background-color: #ddd;
		}

		.bar {
		  position: absolute;
		  width: 1%;
		  height: 100%;
		  background-color: #4CAF50;
		}

		.blink {
		  animation: blinker 0.2s linear 2; 
		  font-weight: bold; 
		} 

		@keyframes blinker {  
		    from, to { color: white; }
		    100% { color: green; }
		}
	</style>
</head>
<body>
	<a href="https://github.com/s-a/time-controller"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				
				<h1>TimeController</h1>
				<h2>Demo for instant search</h2>
				<pre class="prettyprint"> 
function wow(name){ 
	var el = document.getElementById(name)
	    el.style.webkitAnimation = 'none';
	    setTimeout(function() {
	        el.style.webkitAnimation = '';
	    }, 10);
}
function d() {
	wow("span-d");
}
function i() {
	wow("span-i");
}
function t() {
	wow("span-t");
}

document.getElementById("search").addEventListener('keyup', new TimeController(t).throttle(600));
document.getElementById("search").addEventListener('keyup', new TimeController(d).debounce(600));
document.getElementById("search").addEventListener('keyup', new TimeController(i).immediate(600));
				</pre>
				<div class="form-group">
				  <label for="usr">Try to be a wild monkey and type something here very fast...:</label>
				  <input type="text" class="form-control" id="search">
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">	
				<span id="span-i" class="blink">immediate</span> |
				<span id="span-t" class="blink">throttled</span> |
				<span id="span-d" class="blink">debounced (do your magic search logic when this one fires...)</span> |
			</div>
		</div>
		<script> 
			function wow(name){ 
				var el = document.getElementById(name)
				    el.style.webkitAnimation = 'none';
				    setTimeout(function() {
				        el.style.webkitAnimation = '';
				    }, 10);
			}
			function d() {
				wow("span-d");
			}
			function i() {
				wow("span-i");
			}
			function t() {
				wow("span-t");
			}

			document.getElementById("search").addEventListener('keyup', new TimeController(t).throttle(600));
			document.getElementById("search").addEventListener('keyup', new TimeController(d).debounce(600));
			document.getElementById("search").addEventListener('keyup', new TimeController(i).immediate(600));
		</script>
		<hr>
		<div class="row">
			<div class="col-md-12">		

				<h1>Experiment</h1>
				<pre class="prettyprint"> 
function D() {
	move("bar-d");
}
function I() {
	move("bar-i");
}
function T() {
	move("bar-t");
}

window.addEventListener('mousemove', new TimeController(T).throttle(1000));
window.addEventListener('mousemove', new TimeController(D).debounce(1000));
window.addEventListener('mousemove', new TimeController(I).immediate(1000)); 
				</pre>
				<p>
					Control timers in JavaScript. This demo binds documents mouse move event to trigger time controlled function.
					<strong>Move your mouse and enjoy :O)</strong>
				</p>
				<h2>mouse moved immediate before one second</h2>
				<div class="progress">
				  <div id="bar-i" style="width:1%" class="bar"></div>
				</div>
				<h2>mouse moved throttled before one second</h2>
				<div class="progress">
				  <div id="bar-t" style="width:1%" class="bar"></div>
				</div>
				<h2>mouse moved debounced before one second</h2>
				<div class="progress">
				  <div id="bar-d" style="width:1%" class="bar"></div>
				</div>


				<script>
					function move(barName) {
					  var elem = document.getElementById(barName);
					  var width = parseInt(elem.style.width.replace(/%/g, ""), 10);
				      width++;
				      elem.style.width = width + '%';
					  var id = setInterval(frame, 10);
					  function frame() {
					    if (width >= 100) {
					      clearInterval(id);
					    } else {
					    }
					  }
					}
				</script>
				<script> 
					function D() {
						move("bar-d");
					}
					function I() {
						move("bar-i");
					}
					function T() {
						move("bar-t");
					}

					window.addEventListener('mousemove', new TimeController(T).throttle(1000));
					window.addEventListener('mousemove', new TimeController(D).debounce(1000));
					window.addEventListener('mousemove', new TimeController(I).immediate(1000));
				</script>
			</div>
		</div>	
	</div>

</body>
</html>
